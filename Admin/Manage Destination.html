<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OnoAir - Manage Flight Destinations</title>
    <link rel="stylesheet" href="../header.css">
    <link rel="stylesheet" href="Manage Destination.css">
</head>
<body>
    <div id="header-placeholder"></div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            fetch('../header.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('header-placeholder').innerHTML = data;
                });
            fetch('../footer.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('footer-placeholder').innerHTML = data;
                });
        });
    </script>

    <div class="container">
        <h2>Manage Flight Destinations</h2>
        <h3>Manage Destinations</h3>

        <!-- Destination Table -->
        <table class="destination-table" id="destination-table">
            <tr>
                <th>Departure</th>
                <th>Arrival</th>
                <th>Departure Time</th>
                <th>Arrival Time</th>
                <th>Airport Website</th>
            </tr>
            <!-- Rows will be dynamically added here -->
        </table>
        <button class="add-button" onclick="addDestination()">Add Destination</button>
    </div>

    <div class="footer">
        <button class="help-button" onclick="window.location.href='/Support.html'">?</button>
    </div>

    <!-- Add JavaScript -->
    <script type="module">
        import DestinationManager from './Manage Destination.js';

        const destinationManager = new DestinationManager();

        // Function to render the destination table
        function renderDestinations() {
            const table = document.getElementById('destination-table');

            // Clear previous rows (except headers)
            const rows = table.querySelectorAll('tr:not(:first-child)');
            rows.forEach(row => row.remove());

            // Add new rows
            destinationManager.getDestinations().forEach(destination => {
                const row = document.createElement('tr');

                row.innerHTML = `
                    <td>${destination.departure}</td>
                    <td>${destination.arrival}</td>
                    <td>${destination.departureTime}</td>
                    <td>${destination.arrivalTime}</td>
                    <td><a href="${destination.airportWebsite}" target="_blank">${destination.airportWebsite}</a></td>
                `;
                table.appendChild(row);
            });
        }

        // Example function to add a new destination
        function addDestination() {
            const newDestination = {
                departure: "Example City",
                arrival: "Example Arrival",
                departureTime: "12:00 PM",
                arrivalTime: "02:00 PM",
                airportWebsite: "https://example.com"
            };
            destinationManager.addDestination(newDestination);
            renderDestinations();
        }

        // Initial rendering of destinations
        document.addEventListener("DOMContentLoaded", renderDestinations);
    </script>
</body>
</html>
